<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Moon AI Artifact</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000000; }
        #info {
            position: absolute;
            top: 20px; width: 100%; text-align: center;
            color: #00ffff; font-family: sans-serif;
            font-size: 14px; pointer-events: none;
            text-shadow: 0 0 10px #00ffff;
            letter-spacing: 2px;
            z-index: 10;
        }
        #loading {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: white; font-family: monospace;
            background: rgba(0,0,0,0.8); padding: 20px; border: 1px solid #444;
        }
    </style>
</head>
<body>
    <div id="info">MOON MEGASTRUCTURE // ACTIVATED</div>
    <div id="loading">INITIALIZING SYSTEMS...</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // 1. INIT
        const scene = new THREE.Scene();
        
        // Kamera disesuaikan agar bulan terlihat pas di layar HP
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 4;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // Optimasi performa HP
        renderer.toneMapping = THREE.ReinhardToneMapping; // Agar cahaya lebih realistis
        document.body.appendChild(renderer.domElement);

        // Controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.enablePan = false;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 0.5;

        // 2. TEXTURE MANAGER (Reliable Sources)
        const loader = new THREE.TextureLoader();
        
        // URL Stabil dari GitHub Three.js Official (CORS Friendly)
        const texMoon = 'https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/moon_1024.jpg';
        // Menggunakan tekstur noise sederhana untuk background agar ringan
        const texStar = 'https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/sprites/disc.png'; 

        // --- ERROR HANDLER ---
        // Jika gambar gagal loading, bulan akan tetap muncul dengan warna abu-abu (bukan layar hitam)
        const loadTexture = (url) => {
            return new Promise((resolve) => {
                loader.load(url, resolve, undefined, (err) => {
                    console.warn("Texture failed, using backup color.");
                    resolve(null); // Return null jika gagal
                });
            });
        };

        // 3. BUILD SCENE
        (async () => {
            // Load Moon Texture
            const moonTexture = await loadTexture(texMoon);
            document.getElementById('loading').style.display = 'none'; // Hide loading

            // --- A. THE REALISTIC MOON ---
            const moonGeo = new THREE.SphereGeometry(1.5, 64, 64);
            const moonMat = new THREE.MeshStandardMaterial({
                map: moonTexture ? moonTexture : null, // Pakai tekstur jika ada
                color: moonTexture ? 0xffffff : 0x888888, // Fallback warna jika tekstur gagal
                roughness: 0.8,
                metalness: 0.1
            });
            const moon = new THREE.Mesh(moonGeo, moonMat);
            scene.add(moon);

            // --- B. ANCIENT AI GLOW (Atmosphere) ---
            // Efek 'Glow' biru di pinggiran bulan
            const glowGeo = new THREE.SphereGeometry(1.55, 64, 64);
            const glowMat = new THREE.MeshBasicMaterial({
                color: 0x00aaff,
                transparent: true,
                opacity: 0.15,
                side: THREE.BackSide // Render bagian dalam agar terlihat seperti atmosfer
            });
            const glow = new THREE.Mesh(glowGeo, glowMat);
            scene.add(glow);

            // --- C. AI DATA RING (Futuristic Element) ---
            const ringGeo = new THREE.TorusGeometry(2.2, 0.02, 16, 100);
            const ringMat = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: 0.6 });
            const ring = new THREE.Mesh(ringGeo, ringMat);
            ring.rotation.x = Math.PI / 1.7;
            scene.add(ring);

            // --- D. ORBITING DRONES (Particles) ---
            const starsGeo = new THREE.BufferGeometry();
            const count = 300;
            const pos = new Float32Array(count * 3);
            for(let i=0; i<count*3; i++) {
                pos[i] = (Math.random() - 0.5) * 10; // Sebar partikel di area luas
            }
            starsGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            const starsMat = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.03,
                transparent: true,
                opacity: 0.8
            });
            const stars = new THREE.Points(starsGeo, starsMat);
            scene.add(stars);

            // --- E. LIGHTING (Cinematic) ---
            const sunLight = new THREE.DirectionalLight(0xffffff, 2);
            sunLight.position.set(5, 3, 5);
            scene.add(sunLight);

            const fillLight = new THREE.AmbientLight(0x404040, 0.5); // Agar sisi gelap tidak hitam total
            scene.add(fillLight);

            const blueRimLight = new THREE.PointLight(0x0055ff, 5, 10);
            blueRimLight.position.set(-3, -2, -3); // Cahaya biru dari belakang bawah
            scene.add(blueRimLight);

            // 4. ANIMATION LOOP
            const animate = () => {
                requestAnimationFrame(animate);
                
                moon.rotation.y += 0.001;
                ring.rotation.z -= 0.002;
                stars.rotation.y += 0.0005;

                controls.update();
                renderer.render(scene, camera);
            };
            animate();
        })();

        // Resize Handler
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
